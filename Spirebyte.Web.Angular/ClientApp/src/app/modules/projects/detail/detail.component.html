<div class="d-flex flex-row">
    <!--begin::Aside-->
    <div class="flex-row-auto offcanvas-mobile w-250px w-xxl-350px" id="kt_profile_aside">
        <!--begin::Profile Card-->
        <div class="card card-custom">
            <!--begin::Body-->
            <div class="card-body pt-15">
                <div class="d-flex align-items-center" *ngIf="project$ | async as _project">
                    <div class="symbol symbol-60 symbol-xxl-100 mr-5 align-self-start align-self-xxl-center">
                        <div *ngIf="_project.pic != null && _project.pic != ''; else firstletter" class="symbol-label"
                            style="background-image:url('{{_project.pic}}')"></div>
                        <ng-template #firstletter>
                            <span class="symbol-label font-size-h3 font-weight-bold">{{
                                        _project.title | firstLetter
                                        }}</span>
                        </ng-template>
                    </div>
                    <div>
                        <a href="#"
                            class="font-weight-bolder font-size-h5 text-dark-75 text-hover-primary">{{_project.title}}</a>
                        <div class="text-muted">{{_project.description}}</div>
                    </div>
                </div>

                <div class="py-9">
                    <div class="d-flex align-items-center justify-content-between flex-lg-fill mb-2">
                        <span class="font-weight-bold mr-2">Members:</span>
                        <div class="symbol-group symbol-hover"
                            *ngIf="projectUsers$ | async as _projectUsers; else loadingMembers">
                            <div *ngFor="let user of _projectUsers.slice(0, 5)" class="symbol symbol-30 symbol-circle"
                                data-toggle="tooltip" title="" data-original-title="Mark Stone">
                                <div *ngIf="user.pic != null && user.pic != ''; else firstletter" class="symbol-label"
                                    style="background-image:url('{{user.pic}}')"></div>
                                <ng-template #firstletter>
                                    <span class="symbol-label font-size-sm font-weight-bold">{{
                                                user.fullname | firstLetter
                                                }}</span>
                                </ng-template>
                            </div>
                            <div class="symbol symbol-30 symbol-circle symbol-light" *ngIf="_projectUsers.length > 5">
                                <span class="symbol-label font-weight-bold">{{_projectUsers.length - 5}}+</span>
                            </div>
                        </div>
                        <ng-template #loadingMembers>
                            <div class="spinner spinner-primary"></div>
                        </ng-template>
                    </div>
                </div>
                <!--begin::Nav-->
                <div class="navi navi-bold navi-hover navi-active navi-link-rounded">
                    <div class="navi-item mb-2">
                        <a [routerLink]="['issues']" [routerLinkActive]="['active']" class="navi-link py-4">
                            <span class="navi-icon mr-2">
                                <span class="svg-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                        width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <rect x="0" y="0" width="24" height="24"></rect>
                                            <rect fill="#000000" x="4" y="5" width="16" height="3" rx="1.5"></rect>
                                            <path
                                                d="M5.5,15 L18.5,15 C19.3284271,15 20,15.6715729 20,16.5 C20,17.3284271 19.3284271,18 18.5,18 L5.5,18 C4.67157288,18 4,17.3284271 4,16.5 C4,15.6715729 4.67157288,15 5.5,15 Z M5.5,10 L12.5,10 C13.3284271,10 14,10.6715729 14,11.5 C14,12.3284271 13.3284271,13 12.5,13 L5.5,13 C4.67157288,13 4,12.3284271 4,11.5 C4,10.6715729 4.67157288,10 5.5,10 Z"
                                                fill="#000000" opacity="0.3"></path>
                                        </g>
                                    </svg>
                                </span>
                            </span>
                            <span class="navi-text font-size-lg">Issues</span>
                        </a>
                    </div>
                </div>
                <!--end::Nav-->
            </div>
            <!--end::Body-->
        </div>
        <!--end::Profile Card-->
    </div>
    <!--end::Aside-->
    <!--begin::Content-->
    <div class="flex-row-fluid ml-lg-8">
        <div class="row">
            <div class="col">
                <router-outlet></router-outlet>
            </div>
            <div class="col-sm-3" *ngIf="issue$ | async as issue">
                <div class="card">
                    <div class="card-header ribbon ribbon-top ribbon-ver p-0" *ngIf="project$ | async as _project">
                        <ng-container [ngSwitch]="issue.type">
                                <div *ngSwitchCase="'epic'" class="ribbon-target bg-info" style="top: -2px; right: 20px;">
                                        <span class="svg-icon svg-icon-white svg-icon-sm">
                                            <!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2020-10-29-133027/theme/html/demo1/dist/../src/media/svg/icons/Weather/Thunder.svg-->
                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
                                                viewBox="0 0 24 24" version="1.1">
                                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                    <rect x="0" y="0" width="24" height="24"></rect>
                                                    <path
                                                        d="M12.3740377,19.9389434 L18.2226499,11.1660251 C18.4524142,10.8213786 18.3592838,10.3557266 18.0146373,10.1259623 C17.8914367,10.0438285 17.7466809,10 17.5986122,10 L13,10 L13,4.47708173 C13,4.06286817 12.6642136,3.72708173 12.25,3.72708173 C11.9992351,3.72708173 11.7650616,3.85240758 11.6259623,4.06105658 L5.7773501,12.8339749 C5.54758575,13.1786214 5.64071616,13.6442734 5.98536267,13.8740377 C6.10856331,13.9561715 6.25331908,14 6.40138782,14 L11,14 L11,19.5229183 C11,19.9371318 11.3357864,20.2729183 11.75,20.2729183 C12.0007649,20.2729183 12.2349384,20.1475924 12.3740377,19.9389434 Z"
                                                        fill="#000000"></path>
                                                </g>
                                            </svg>
                                            <!--end::Svg Icon-->
                                        </span>
                                    </div>
    
                                    <div *ngSwitchCase="'story'" class="ribbon-target bg-success" style="top: -2px; right: 20px;">
                                        <span class="svg-icon svg-icon-white svg-icon-sm">
                                            <!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2020-10-29-133027/theme/html/demo1/dist/../src/media/svg/icons/Files/Folder.svg--><svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
                                                viewBox="0 0 24 24" version="1.1">
                                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                    <rect x="0" y="0" width="24" height="24" />
                                                    <path
                                                        d="M3.5,21 L20.5,21 C21.3284271,21 22,20.3284271 22,19.5 L22,8.5 C22,7.67157288 21.3284271,7 20.5,7 L10,7 L7.43933983,4.43933983 C7.15803526,4.15803526 6.77650439,4 6.37867966,4 L3.5,4 C2.67157288,4 2,4.67157288 2,5.5 L2,19.5 C2,20.3284271 2.67157288,21 3.5,21 Z"
                                                        fill="#000000" opacity="0.9" />
                                                </g>
                                            </svg>
                                            <!--end::Svg Icon--></span>
                                    </div>
    
                                    <div *ngSwitchCase="'task'" class="ribbon-target bg-primary" style="top: -2px; right: 20px;">
                                        <span class="svg-icon svg-icon-white svg-icon-sm">
                                            <!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2020-10-29-133027/theme/html/demo1/dist/../src/media/svg/icons/General/Clipboard.svg--><svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
                                                viewBox="0 0 24 24" version="1.1">
                                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                    <rect x="0" y="0" width="24" height="24" />
                                                    <path
                                                        d="M8,3 L8,3.5 C8,4.32842712 8.67157288,5 9.5,5 L14.5,5 C15.3284271,5 16,4.32842712 16,3.5 L16,3 L18,3 C19.1045695,3 20,3.8954305 20,5 L20,21 C20,22.1045695 19.1045695,23 18,23 L6,23 C4.8954305,23 4,22.1045695 4,21 L4,5 C4,3.8954305 4.8954305,3 6,3 L8,3 Z"
                                                        fill="#000000" opacity="0.6" />
                                                    <path
                                                        d="M11,2 C11,1.44771525 11.4477153,1 12,1 C12.5522847,1 13,1.44771525 13,2 L14.5,2 C14.7761424,2 15,2.22385763 15,2.5 L15,3.5 C15,3.77614237 14.7761424,4 14.5,4 L9.5,4 C9.22385763,4 9,3.77614237 9,3.5 L9,2.5 C9,2.22385763 9.22385763,2 9.5,2 L11,2 Z"
                                                        fill="#000000" />
                                                    <rect fill="#000000" opacity="0.9" x="7" y="10" width="5" height="2"
                                                        rx="1" />
                                                    <rect fill="#000000" opacity="0.9" x="7" y="14" width="9" height="2"
                                                        rx="1" />
                                                </g>
                                            </svg>
                                            <!--end::Svg Icon--></span>
                                    </div>
    
                                    <div *ngSwitchCase="'subTask'" class="ribbon-target bg-primary" style="top: -2px; right: 20px;">
                                        <span class="svg-icon svg-icon-white svg-icon-sm">
                                            <!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2020-10-29-133027/theme/html/demo1/dist/../src/media/svg/icons/General/Duplicate.svg--><svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
                                                viewBox="0 0 24 24" version="1.1">
                                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                    <rect x="0" y="0" width="24" height="24" />
                                                    <path
                                                        d="M15.9956071,6 L9,6 C7.34314575,6 6,7.34314575 6,9 L6,15.9956071 C4.70185442,15.9316381 4,15.1706419 4,13.8181818 L4,6.18181818 C4,4.76751186 4.76751186,4 6.18181818,4 L13.8181818,4 C15.1706419,4 15.9316381,4.70185442 15.9956071,6 Z"
                                                        fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                                    <path
                                                        d="M10.1818182,8 L17.8181818,8 C19.2324881,8 20,8.76751186 20,10.1818182 L20,17.8181818 C20,19.2324881 19.2324881,20 17.8181818,20 L10.1818182,20 C8.76751186,20 8,19.2324881 8,17.8181818 L8,10.1818182 C8,8.76751186 8.76751186,8 10.1818182,8 Z"
                                                        fill="#000000" />
                                                </g>
                                            </svg>
                                            <!--end::Svg Icon--></span>
                                    </div>
    
                                    <div *ngSwitchCase="'subTask'" class="ribbon-target bg-danger" style="top: -2px; right: 20px;">
                                        <span class="svg-icon svg-icon-white svg-icon-sm">
                                            <!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2020-10-29-133027/theme/html/demo1/dist/../src/media/svg/icons/General/Fire.svg--><svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
                                                viewBox="0 0 24 24" version="1.1">
                                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                    <rect x="0" y="0" width="24" height="24" />
                                                    <path
                                                        d="M14,7 C13.6666667,10.3333333 12.6666667,12.1167764 11,12.3503292 C11,12.3503292 12.5,6.5 10.5,3.5 C10.5,3.5 10.287918,6.71444735 8.14498739,10.5717225 C7.14049032,12.3798172 6,13.5986793 6,16 C6,19.428689 9.51143904,21.2006583 12.0057195,21.2006583 C14.5,21.2006583 18,20.0006172 18,15.8004732 C18,14.0733981 16.6666667,11.1399071 14,7 Z"
                                                        fill="#000000" />
                                                </g>
                                            </svg>
                                            <!--end::Svg Icon--></span>
                                    </div>
                        </ng-container>
                        <div class="d-flex flex-row">
                            <div class="symbol symbol-30 m-5 mr-2">
                                <div *ngIf="_project.pic != null && _project.pic != ''; else firstletter"
                                    class="symbol-label" style="background-image:url('{{_project.pic}}')"></div>
                                <ng-template #firstletter>
                                    <span class="symbol-label font-size-h3 font-weight-bold">{{
                                                    _project.title | firstLetter
                                                    }}</span>
                                </ng-template>
                            </div>
                            <ol class="breadcrumb breadcrumb-transparent m-0 p-0">
                                <li class="breadcrumb-item">
                                    {{_project.title}}
                                </li>
                                <li class="breadcrumb-item active" aria-current="page">{{issue.key}}</li>
                            </ol>
                        </div>
                    </div>
                    <div class="card-body pt-1">
                        <input type="text" class="form-control form-control-hidden w-100 p-0 h6" value="{{issue.title}}" />
                        <div class="form-group row">
                            <label class="col-lg-3 col-form-label text-left text-dark-65">Storypoints:</label>
                            <div class="col-lg-6">
                                <input type="number" class="form-control form-control-hidden" value="{{issue.storyPoints}}" />
                            </div>
                        </div>
                        <h3 class="font-size-lg text-dark font-weight-bold mb-3">Details</h3>
                        <div class="mb-3">
                            <div class="form-group row">
                                <label class="col-lg-3 text-right text-dark-65">Status:</label>
                                <div class="col-lg-6" [ngSwitch]="issue.status">
                                    <span *ngSwitchCase="'todo'" class="label label-inline mr-2">TO DO</span>
                                    <span *ngSwitchCase="'inprogress'" class="label label-info label-inline mr-2">IN
                                        PROGRESS</span>
                                    <span *ngSwitchCase="'done'"
                                        class="label label-success label-inline mr-2">DONE</span>
                                </div>
                            </div>

                        </div>
                        <h3 class="font-size-lg text-dark font-weight-bold mb-3">People</h3>
                        <div class="mb-3">
                            <div class="form-group row">
                                <label class="col-lg-3 text-right text-dark-65">Assignees:</label>
                                <div class="col-lg-6">
                                    <span *ngIf="issue.assignees.length == 0; else loadAssignees">No assignees</span>
                                    <ng-template #loadAssignees>
                                        <div class="symbol-group symbol-hover"
                                            *ngIf="assignees$ | async as _assignees; else loadingAssignees">
                                            <div *ngFor="let user of _assignees.slice(0, 5)" class="symbol symbol-30 symbol-circle"
                                                data-toggle="tooltip" title="" data-original-title="Mark Stone">
                                                <div *ngIf="user.pic != null && user.pic != ''; else firstletter" class="symbol-label"
                                                    style="background-image:url('{{user.pic}}')"></div>
                                                <ng-template #firstletter>
                                                    <span class="symbol-label font-size-sm font-weight-bold">{{
                                                                user.fullname | firstLetter
                                                                }}</span>
                                                </ng-template>
                                            </div>
                                            <div class="symbol symbol-30 symbol-circle symbol-light" *ngIf="_assignees.length > 5">
                                                <span class="symbol-label font-weight-bold">{{_assignees.length - 5}}+</span>
                                            </div>
                                        </div>
                                    </ng-template>
                                    <ng-template #loadingAssignees>
                                        <div class="spinner spinner-primary"></div>
                                    </ng-template>
                                </div>
                            </div>
                        </div>
                        <h3 class="font-size-lg text-dark font-weight-bold mb-3">Description</h3>
                        <div class="mb-3">
                            <textarea class="form-control form-control-hidden w-100">{{issue.description}}</textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--end::Content-->
    </div>